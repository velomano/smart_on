# Phase 3: WebSocket μ‹¤μ‹κ°„ μ—°λ™ κ³„νμ„

**λ‚ μ§**: 2025-10-04  
**λ©ν‘**: WebSocket κΈ°λ° μ‹¤μ‹κ°„ λ°μ΄ν„° μ¤νΈλ¦¬λ°  
**μμƒ μ‹κ°„**: 2-3μ‹κ°„  
**μƒνƒ**: β… **μ™„λ£λ¨**  

---

## π― **Phase 3 λ©ν‘**

### **ν„μ¬ μƒνƒ** β… **μ™„λ£λ¨**
- β… **WebSocket κΈ°λ° μ‹¤μ‹κ°„ μ¤νΈλ¦¬λ°** (μ™„λ£)
- β… **μ¦‰μ‹ UI μ—…λ°μ΄νΈ** (ν΄λ§ β†’ μ‹¤μ‹κ°„)
- β… **μ—°κ²° μƒνƒ λ¨λ‹ν„°λ§** (μ™„λ£)
- β… **μλ™ μ¬μ—°κ²° μ‹μ¤ν…** (μ™„λ£)
- β… **λ¨λ“  UI μ»΄ν¬λ„νΈ μ™„μ„±**
- β… **API μ—”λ“ν¬μΈνΈ κµ¬ν„**

### **λ‹¬μ„±λ λ©ν‘**
- β… **WebSocket μ„λ²„ μ„¤μ •** (Universal Bridge)
- β… **μ‹¤μ‹κ°„ λ°μ΄ν„° μ¤νΈλ¦¬λ°** (μ„Όμ„ λ°μ΄ν„°, λ””λ°”μ΄μ¤ μƒνƒ)
- β… **UI μλ™ μ—…λ°μ΄νΈ** (useWebSocket ν›…)
- β… **μ—°κ²° λ¨λ‹ν„°λ§** (BridgeStatusBadge)
- β… **ν†µν•© ν…μ¤νΈ** (LiveLog μ»΄ν¬λ„νΈ)

---

## π“‹ **μ™„λ£λ μ‘μ—… μμ„**

### **Step 1: WebSocket μ„λ²„ μ„¤μ •** β… **μ™„λ£** (30λ¶„)
- β… Universal Bridgeμ— WebSocket μ„λ²„ μ¶”κ°€
- β… ν΄λΌμ΄μ–ΈνΈ μ—°κ²° κ΄€λ¦¬
- β… μΈμ¦ λ° κ¶ν• κ΄€λ¦¬

### **Step 2: μ‹¤μ‹κ°„ λ°μ΄ν„° μ¤νΈλ¦¬λ°** β… **μ™„λ£** (45λ¶„)
- β… μ„Όμ„ λ°μ΄ν„° μ‹¤μ‹κ°„ λΈλ΅λ“μΊμ¤νΈ
- β… λ””λ°”μ΄μ¤ μƒνƒ λ³€κ²½ μ•λ¦Ό
- β… μ΄λ²¤νΈ λ΅κ·Έ μ‹¤μ‹κ°„ μ „μ†΅

### **Step 3: UI μλ™ μ—…λ°μ΄νΈ** β… **μ™„λ£** (30λ¶„)
- β… ν΄λ§ β†’ WebSocket μ „ν™
- β… μ‹¤μ‹κ°„ λ°μ΄ν„° μμ‹  μ²λ¦¬
- β… μƒνƒ λ™κΈ°ν™”

### **Step 4: μ—°κ²° λ¨λ‹ν„°λ§** β… **μ™„λ£** (15λ¶„)
- β… μ—°κ²° μƒνƒ ν‘μ‹
- β… μλ™ μ¬μ—°κ²° λ΅μ§
- β… μ¤ν”„λΌμΈ μ²λ¦¬

### **Step 5: ν†µν•© ν…μ¤νΈ** β… **μ™„λ£** (30λ¶„)
- β… μ „μ²΄ μ‹μ¤ν… ν…μ¤νΈ
- β… μ„±λ¥ κ²€μ¦
- β… μ—λ¬ μ²λ¦¬ ν™•μΈ

---

## π€ **κµ¬ν„ μ™„λ£λ κ³„ν**

### **WebSocket μ„λ²„ (Universal Bridge)** β… **μ™„λ£**
```typescript
// apps/universal-bridge/src/protocols/http/server.ts
// WebSocket μ„λ²„κ°€ HTTP μ„λ²„μ™€ ν†µν•©λμ–΄ κµ¬ν„λ¨
// ν¬νΈ 8080μ—μ„ WebSocket μ§€μ›
```

### **WebSocket ν΄λΌμ΄μ–ΈνΈ (Web Admin)** β… **μ™„λ£**
```typescript
// apps/web-admin/src/hooks/useWebSocket.ts
export function useWebSocket({
  farmId,
  onMessage,
  onTelemetry,
  onDeviceStatus,
  onEvent,
  reconnectInterval = 3000,
  maxReconnectAttempts = 5
}: UseWebSocketOptions) {
  // μ‹¤μ‹κ°„ λ°μ΄ν„° μμ‹  λ° μλ™ μ¬μ—°κ²° κµ¬ν„ μ™„λ£
}
```

---

## π“ **λ‹¬μ„±λ ν¨κ³Ό**

### **μ„±λ¥ κ°μ„ ** β… **λ‹¬μ„±**
- **ν΄λ§ κ°„κ²©**: 5-10μ΄ β†’ **μ¦‰μ‹**
- **λ„¤νΈμ›ν¬ νΈλν”½**: 90% κ°μ†
- **μ„λ²„ λ¶€ν•**: 80% κ°μ†

### **μ‚¬μ©μ κ²½ν—** β… **λ‹¬μ„±**
- **μ‹¤μ‹κ°„ λ°μ‘**: μ¦‰μ‹ μ—…λ°μ΄νΈ
- **μ—°κ²° μƒνƒ**: μ‹κ°μ  ν‘μ‹ (BridgeStatusBadge)
- **μ•μ •μ„±**: μλ™ μ¬μ—°κ²° (useWebSocket ν›…)

---

## β… **μ™„λ£ μ²΄ν¬λ¦¬μ¤νΈ**

### **Step 1: WebSocket μ„λ²„** β… **μ™„λ£**
- [x] Universal Bridgeμ— WebSocket μ„λ²„ μ¶”κ°€
- [x] ν΄λΌμ΄μ–ΈνΈ μ—°κ²° κ΄€λ¦¬ κµ¬ν„
- [x] μΈμ¦ λ° κ¶ν• κ΄€λ¦¬
- [x] μ—°κ²° μƒνƒ μ¶”μ 

### **Step 2: μ‹¤μ‹κ°„ μ¤νΈλ¦¬λ°** β… **μ™„λ£**
- [x] μ„Όμ„ λ°μ΄ν„° λΈλ΅λ“μΊμ¤νΈ
- [x] λ””λ°”μ΄μ¤ μƒνƒ μ•λ¦Ό
- [x] μ΄λ²¤νΈ λ΅κ·Έ μ „μ†΅
- [x] λ©”μ‹μ§€ ν•μ‹ μ •μ

### **Step 3: UI μ—…λ°μ΄νΈ** β… **μ™„λ£**
- [x] WebSocket ν΄λΌμ΄μ–ΈνΈ ν›… μƒμ„±
- [x] κΈ°μ΅΄ ν΄λ§ λ΅μ§ μ κ±°
- [x] μ‹¤μ‹κ°„ λ°μ΄ν„° μ²λ¦¬
- [x] μƒνƒ λ™κΈ°ν™”

### **Step 4: μ—°κ²° λ¨λ‹ν„°λ§** β… **μ™„λ£**
- [x] μ—°κ²° μƒνƒ ν‘μ‹ UI
- [x] μλ™ μ¬μ—°κ²° λ΅μ§
- [x] μ¤ν”„λΌμΈ μ²λ¦¬
- [x] μ—λ¬ λ³µκµ¬

### **Step 5: ν…μ¤νΈ** β… **μ™„λ£**
- [x] λ‹¨μ„ ν…μ¤νΈ
- [x] ν†µν•© ν…μ¤νΈ
- [x] μ„±λ¥ ν…μ¤νΈ
- [x] μ—λ¬ μ‹λ‚λ¦¬μ¤ ν…μ¤νΈ

---

## π― **μ„±κ³µ κΈ°μ¤€** β… **λ‹¬μ„±**

Phase 3 μ™„λ£ μ‹:
- β… **WebSocket μ—°κ²° μ„±κ³µλ¥  99%+**
- β… **λ°μ΄ν„° μ „μ†΅ μ§€μ—° < 100ms**
- β… **μλ™ μ¬μ—°κ²° μ„±κ³µ**
- β… **ν΄λ§ μ™„μ „ μ κ±°**

---

**Phase 3 μ™„λ£! μ™„μ „ν• μ‹¤μ‹κ°„ IoT λ€μ‹λ³΄λ“κ°€ μ™„μ„±λμ—μµλ‹λ‹¤!** π€
