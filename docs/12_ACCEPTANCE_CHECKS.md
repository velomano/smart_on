# ✅ 수용 기준 체크리스트

## 🎯 Phase 0: Tuya 스마트스위치 제어

### 📱 Mobile App (Expo)
- [x] **Expo Bare 환경 설정** ✅ 완료
  - [x] `expo prebuild` 실행 성공
  - [x] Android 네이티브 코드 생성
  - [x] EAS Build 환경 준비 완료

- [x] **Tuya SDK 통합** ✅ 완료
  - [x] Android 패키지명 등록 완료 (`com.velomano.smartfarm`)
  - [x] SHA-256 지문 등록 완료
  - [x] AppKey/Secret 환경변수 설정 (app.json)
  - [x] SDK 네이티브 모듈 구현 완료
  - [x] React Native 서비스 구현 완료

- [x] **UI/UX 디자인** ✅ 완료
  - [x] 현대적 Glassmorphism 디자인
  - [x] 스마트 스위치 등록 화면
  - [x] 디바이스 제어 인터페이스
  - [x] Mock 데이터 연동

- [ ] **실제 Tuya SDK 연동** 🔄 진행 중
  - [ ] Android Studio 설치 및 설정
  - [ ] 실제 Tuya SDK 라이브러리 연동
  - [ ] Tuya 기기 검색 기능
  - [ ] 기기 페어링 프로세스
  - [ ] 스위치 ON/OFF 제어
  - [ ] 기기 상태 실시간 업데이트

### 🌐 Web Admin
- [x] **모니터링 대시보드** ✅ 완료
  - [x] Glassmorphism UI/UX 디자인
  - [x] Supabase 데이터베이스 연동
  - [x] 실시간 센서 데이터 표시 (2,890개 레코드)
  - [x] 농장 및 디바이스 관리
  - [x] Mock 데이터 제공

## 🍓 Phase 1: 센서 데이터 수집

### 🔧 Raspberry Pi 설정
- [ ] **환경 준비**
  - [ ] Python 3.8+ 설치
  - [ ] 필요한 패키지 설치 (requests, etc.)
  - [ ] 환경변수 설정 (.env)

- [ ] **센서 데이터 업로드**
  - [ ] POST /api/ingest/sensor 엔드포인트 연동
  - [ ] 센서 데이터 JSON 형식 준수
  - [ ] 에러 처리 및 재시도 로직

- [ ] **제어 명령 처리**
  - [ ] GET /api/control/queue?pi_id=... 폴링
  - [ ] 명령 실행 및 결과 처리
  - [ ] POST /api/control/ack 결과 보고

### 🌐 API 서버 (Next.js)
- [ ] **센서 데이터 수집**
  - [ ] /api/ingest/sensor POST 엔드포인트
  - [ ] 데이터 유효성 검증
  - [ ] Supabase 저장 성공

- [ ] **제어 명령 큐**
  - [ ] /api/control/queue GET 엔드포인트
  - [ ] Pi별 명령 필터링
  - [ ] 명령 상태 관리

- [ ] **명령 실행 확인**
  - [ ] /api/control/ack POST 엔드포인트
  - [ ] 실행 결과 저장
  - [ ] 상태 업데이트

### 🗄️ 데이터베이스
- [x] **스키마 적용** ✅ 완료
  - [x] 모든 테이블 생성 완료 (12개 테이블)
  - [x] 실제 데이터 연동 완료 (2,890개 센서 데이터)
  - [x] Supabase 클라이언트 연동 완료

- [x] **데이터 구조 분석** ✅ 완료
  - [x] `farms` 테이블: 1개 농장 ('메인 팜')
  - [x] `devices` 테이블: 7개 디바이스 (3개 센서 게이트웨이 + 4개 Tuya 디바이스)
  - [x] `sensors` 테이블: 10개 센서 (온도, 습도, EC, pH, 조도, 수온)
  - [x] `sensor_readings` 테이블: 2,890개 레코드
  - [x] Mock 데이터 제공으로 개발 환경 지원

- [ ] **RLS 정책** 🔄 구현 예정
  - [ ] 사용자별 데이터 접근 제어
  - [ ] Pi별 데이터 격리
  - [ ] 관리자 권한 설정

## 🔄 Phase 2: MQTT 확장

### 📡 MQTT 브로커
- [ ] **Mosquitto 설치**
  - [ ] 서버에 Mosquitto 설치
  - [ ] 인증 설정 (username/password)
  - [ ] SSL/TLS 설정

- [ ] **브리지 구현**
  - [ ] REST ↔ MQTT 브리지
  - [ ] 메시지 형식 표준화
  - [ ] 에러 처리 및 로깅

### 📊 성능 테스트
- [ ] **대규모 데이터 처리**
  - [ ] 1000+ 센서 동시 처리
  - [ ] 메시지 처리 지연시간 < 1초
  - [ ] 시스템 안정성 24시간 테스트

## 🧪 통합 테스트

### 🔗 전체 시스템 연동
- [ ] **End-to-End 테스트**
  - [ ] Arduino → Pi → Server → Web Admin
  - [ ] Web Admin → Server → Pi → Arduino
  - [ ] Mobile App → Tuya → Smart Switch

### 📱 사용자 시나리오
- [ ] **일반 사용자**
  - [ ] 모바일 앱으로 스위치 제어
  - [ ] 실시간 상태 확인
  - [ ] 알림 수신

- [ ] **관리자**
  - [ ] 웹 대시보드에서 전체 모니터링
  - [ ] 센서 데이터 분석
  - [ ] 시스템 설정 관리

### 🛡️ 보안 테스트
- [ ] **인증/권한**
  - [ ] 사용자 로그인/로그아웃
  - [ ] API 토큰 검증
  - [ ] RLS 정책 동작 확인

- [ ] **데이터 보안**
  - [ ] 민감 정보 암호화
  - [ ] HTTPS 통신 확인
  - [ ] 환경변수 보안 관리

## 📋 배포 체크리스트

### 🚀 CI/CD
- [x] **GitHub Actions** ✅ 완료
  - [x] 코드 품질 검사 (ESLint, TypeScript)
  - [x] Android 빌드 자동화
  - [x] 배포 자동화 설정

- [x] **배포 환경** ✅ 완료
  - [x] Vercel (Web Admin) 배포 확인
  - [x] EAS Build (Mobile App) 환경 준비
  - [x] Supabase 프로덕션 환경 설정 완료
  - [x] 환경변수 설정 완료 (app.json, .env.local)

### 📊 모니터링
- [ ] **로그 관리**
  - [ ] 애플리케이션 로그 수집
  - [ ] 에러 추적 및 알림
  - [ ] 성능 메트릭 수집

- [ ] **백업 및 복구**
  - [ ] 데이터베이스 백업 자동화
  - [ ] 복구 프로세스 테스트
  - [ ] 재해 복구 계획 수립

## ⚠️ 품질 기준

### 📏 성능 기준
- [ ] **응답 시간**
  - [ ] API 응답 시간 < 500ms
  - [ ] 페이지 로딩 시간 < 3초
  - [ ] 센서 데이터 업데이트 < 1초

### 🔍 코드 품질
- [ ] **정적 분석**
  - [ ] ESLint 에러 0개
  - [ ] TypeScript 에러 0개
  - [ ] 코드 커버리지 > 80%

### 📚 문서화
- [x] **프로젝트 문서** ✅ 완료
  - [x] README.md 업데이트 완료
  - [x] 문서 인덱스 (00_README.md) 완료
  - [x] 환경변수 가이드 (01_ENV.md) 완료
  - [x] UI 디자인 시스템 문서 완료
  - [x] 기존 DB 구조 분석 문서 완료

- [x] **기술 문서** ✅ 완료
  - [x] Tuya SDK 가이드 (07_TUYA_SDK.md) 완료
  - [x] API 계약 문서 (06_API_CONTRACT.md) 완료
  - [x] 수용성 체크 문서 (12_ACCEPTANCE_CHECKS.md) 완료

- [ ] **사용자 문서** 🔄 구현 예정
  - [ ] 설치 가이드
  - [ ] 사용자 매뉴얼
  - [ ] 문제 해결 가이드

## 🚀 Phase 3: IoT Designer MVP

### 🤖 자연어 기반 IoT 설계
- [ ] **기본 기능 테스트**
  - [ ] iot-designer 마법사에서 DHT22×1, DS18B20×1, 릴레이×2, 팬(PWM)×1 구성 시
    - [ ] 충돌 없는 핀 자동 배치가 표시된다
    - [ ] 전원 요구량 카드에 3.3V, 5V, 12V 권장 전류가 계산되어 나온다
    - [ ] SVG 회로도에 ESP32—센서—릴레이—팬 드라이버 간 결선이 시각화된다
    - [ ] Arduino 코드 미리보기가 생성되고 다운로드 가능하다

- [ ] **자연어 입력 테스트**
  - [ ] "온도 2개, 습도 1개, 스프링클러 4개, 팬 2개로 스마트팜" 입력 시
    - [ ] 카탈로그로 정상 변환된다
    - [ ] 환경변수 없이도 템플릿 조합만으로 로컬에서 코드가 생성된다

- [ ] **LLM 기능 테스트**
  - [ ] LLM 기능을 켜면 동일 입력에 대해
    - [ ] 제안 구성(센서 대체안, 전원주의)을 추가로 제시한다

### ⚡ 성능 기준
- [ ] **응답 시간**
  - [ ] 자연어 파싱: 1초 이내
  - [ ] 핀 할당: 0.5초 이내
  - [ ] 코드 생성: 2초 이내
  - [ ] 회로도 렌더링: 1초 이내

### 🛡️ 안전 기준
- [ ] **정확도**
  - [ ] 핀 충돌 검사 100% 정확도
  - [ ] 전원 요구사항 계산 오차 ±5% 이내
  - [ ] 고전압 안전 경고 항상 표시
  - [ ] 역기전력 보호 권장사항 포함
