# ✅ 수용 기준 체크리스트

## 🎯 Phase 0: Tuya 스마트스위치 제어

### 📱 Mobile App (Expo)
- [ ] **Expo Bare 환경 설정**
  - [ ] `expo prebuild` 실행 성공
  - [ ] Android Studio 연동 확인
  - [ ] EAS Build 환경 준비 완료

- [ ] **Tuya SDK 통합**
  - [ ] Android 패키지명 등록 완료
  - [ ] SHA-256 지문 등록 완료
  - [ ] AppKey/Secret 환경변수 설정
  - [ ] SDK 초기화 성공

- [ ] **기기 페어링/제어**
  - [ ] Tuya 기기 검색 기능
  - [ ] 기기 페어링 프로세스
  - [ ] 스위치 ON/OFF 제어
  - [ ] 기기 상태 실시간 업데이트

### 🌐 Web Admin
- [ ] **모니터링 대시보드**
  - [ ] Tuya 기기 목록 표시
  - [ ] 기기 상태 실시간 모니터링
  - [ ] 제어 로그 표시

## 🍓 Phase 1: 센서 데이터 수집

### 🔧 Raspberry Pi 설정
- [ ] **환경 준비**
  - [ ] Python 3.8+ 설치
  - [ ] 필요한 패키지 설치 (requests, etc.)
  - [ ] 환경변수 설정 (.env)

- [ ] **센서 데이터 업로드**
  - [ ] POST /api/ingest/sensor 엔드포인트 연동
  - [ ] 센서 데이터 JSON 형식 준수
  - [ ] 에러 처리 및 재시도 로직

- [ ] **제어 명령 처리**
  - [ ] GET /api/control/queue?pi_id=... 폴링
  - [ ] 명령 실행 및 결과 처리
  - [ ] POST /api/control/ack 결과 보고

### 🌐 API 서버 (Next.js)
- [ ] **센서 데이터 수집**
  - [ ] /api/ingest/sensor POST 엔드포인트
  - [ ] 데이터 유효성 검증
  - [ ] Supabase 저장 성공

- [ ] **제어 명령 큐**
  - [ ] /api/control/queue GET 엔드포인트
  - [ ] Pi별 명령 필터링
  - [ ] 명령 상태 관리

- [ ] **명령 실행 확인**
  - [ ] /api/control/ack POST 엔드포인트
  - [ ] 실행 결과 저장
  - [ ] 상태 업데이트

### 🗄️ 데이터베이스
- [ ] **스키마 적용**
  - [ ] 모든 테이블 생성 완료
  - [ ] 인덱스 적용 완료
  - [ ] 트리거 및 함수 적용

- [ ] **RLS 정책**
  - [ ] 사용자별 데이터 접근 제어
  - [ ] Pi별 데이터 격리
  - [ ] 관리자 권한 설정

## 🔄 Phase 2: MQTT 확장

### 📡 MQTT 브로커
- [ ] **Mosquitto 설치**
  - [ ] 서버에 Mosquitto 설치
  - [ ] 인증 설정 (username/password)
  - [ ] SSL/TLS 설정

- [ ] **브리지 구현**
  - [ ] REST ↔ MQTT 브리지
  - [ ] 메시지 형식 표준화
  - [ ] 에러 처리 및 로깅

### 📊 성능 테스트
- [ ] **대규모 데이터 처리**
  - [ ] 1000+ 센서 동시 처리
  - [ ] 메시지 처리 지연시간 < 1초
  - [ ] 시스템 안정성 24시간 테스트

## 🧪 통합 테스트

### 🔗 전체 시스템 연동
- [ ] **End-to-End 테스트**
  - [ ] Arduino → Pi → Server → Web Admin
  - [ ] Web Admin → Server → Pi → Arduino
  - [ ] Mobile App → Tuya → Smart Switch

### 📱 사용자 시나리오
- [ ] **일반 사용자**
  - [ ] 모바일 앱으로 스위치 제어
  - [ ] 실시간 상태 확인
  - [ ] 알림 수신

- [ ] **관리자**
  - [ ] 웹 대시보드에서 전체 모니터링
  - [ ] 센서 데이터 분석
  - [ ] 시스템 설정 관리

### 🛡️ 보안 테스트
- [ ] **인증/권한**
  - [ ] 사용자 로그인/로그아웃
  - [ ] API 토큰 검증
  - [ ] RLS 정책 동작 확인

- [ ] **데이터 보안**
  - [ ] 민감 정보 암호화
  - [ ] HTTPS 통신 확인
  - [ ] 환경변수 보안 관리

## 📋 배포 체크리스트

### 🚀 CI/CD
- [ ] **GitHub Actions**
  - [ ] 코드 품질 검사 (ESLint, TypeScript)
  - [ ] 테스트 자동 실행
  - [ ] 배포 자동화

- [ ] **배포 환경**
  - [ ] Vercel (Web Admin) 배포 확인
  - [ ] EAS Build (Mobile App) 배포 확인
  - [ ] Supabase 프로덕션 환경 설정

### 📊 모니터링
- [ ] **로그 관리**
  - [ ] 애플리케이션 로그 수집
  - [ ] 에러 추적 및 알림
  - [ ] 성능 메트릭 수집

- [ ] **백업 및 복구**
  - [ ] 데이터베이스 백업 자동화
  - [ ] 복구 프로세스 테스트
  - [ ] 재해 복구 계획 수립

## ⚠️ 품질 기준

### 📏 성능 기준
- [ ] **응답 시간**
  - [ ] API 응답 시간 < 500ms
  - [ ] 페이지 로딩 시간 < 3초
  - [ ] 센서 데이터 업데이트 < 1초

### 🔍 코드 품질
- [ ] **정적 분석**
  - [ ] ESLint 에러 0개
  - [ ] TypeScript 에러 0개
  - [ ] 코드 커버리지 > 80%

### 📚 문서화
- [ ] **API 문서**
  - [ ] 모든 엔드포인트 문서화
  - [ ] 요청/응답 예시 제공
  - [ ] 에러 코드 정의

- [ ] **사용자 문서**
  - [ ] 설치 가이드
  - [ ] 사용자 매뉴얼
  - [ ] 문제 해결 가이드
