# 최적화된 GitHub Actions 크론 설정

## 🎯 **최적화된 설정**

### ✅ **구현된 개선사항**

1. **📅 일일 배치 수집**
   - **스케줄**: `0 18 * * *` (매일 오전 3시 KST)
   - **배치 크기**: 기본 10개 (설정 가능)
   - **중복 체크**: 체크섬 기반 실시간 중복 제거

2. **🔄 중복 제거 로직**
   - 수집 전 기존 레시피 수 확인
   - 체크섬으로 중복 검증
   - 신규 레시피만 저장
   - 중복 통계 로깅

3. **📊 배치 처리**
   - 소스별 배치 크기 제한
   - 전체 배치 크기 제한
   - 메모리 효율적 처리

## 🚀 **동작 방식**

```
매일 오전 3시 (KST)
    ↓
GitHub Actions 실행
    ↓
기존 레시피 수 확인
    ↓
워커에서 10개씩 수집
    ↓
체크섬으로 중복 체크
    ↓
신규 레시피만 저장
    ↓
결과 로깅 및 알림
```

## 📈 **예상 효과**

### 장점
- ✅ **안정성**: 소량씩 처리로 서버 부하 최소화
- ✅ **효율성**: 중복 제거로 불필요한 저장 방지
- ✅ **모니터링**: 상세한 로그로 상태 추적
- ✅ **유연성**: 배치 크기 조정 가능

### 데이터 수집 예상
- **일일**: 최대 10개 신규 레시피
- **주간**: 최대 70개 신규 레시피
- **월간**: 최대 300개 신규 레시피

## 🔧 **설정 방법**

### 1. GitHub Secrets 설정
```bash
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
SUPABASE_FN_URL=https://your-project.supabase.co/functions/v1
WORKER_URL=https://your-worker-domain.com
```

### 2. 수동 실행 테스트
```bash
# GitHub Actions에서 수동 실행
# 소스: all, 배치크기: 10
```

### 3. 모니터링
- GitHub Actions 로그 확인
- Supabase 데이터베이스 확인
- 중복 제거율 모니터링

## 📊 **성능 지표**

### 목표 지표
- **성공률**: 95% 이상
- **중복 제거율**: 80% 이상
- **처리 시간**: 5분 이내
- **메모리 사용량**: 512MB 이하

### 모니터링 포인트
- 수집된 레시피 수
- 중복된 레시피 수
- 저장된 신규 레시피 수
- 처리 시간
- 에러 발생률

이제 **최적화된 일일 배치 수집 시스템**이 완성되었습니다! 🎉

매일 소량씩 안정적으로 수집하여 데이터베이스를 풍부하게 만들 것입니다.
